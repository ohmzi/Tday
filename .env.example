# ========================
# Environment & App Config
# ========================
NODE_ENV=production
# Optional: set NEXTAUTH_URL only when you want to force a single canonical host.
# Leave it unset for dynamic hosts (e.g. Cloudflare Tunnel URLs) with AUTH_TRUST_HOST=true.
NEXTAUTH_URL=
# Optional: fallback URL used in non-request contexts only.
API_URL=http://localhost:3000/api
AUTH_TRUST_HOST=true
# Generate with: openssl rand -base64 32
CRONJOB_SECRET=CHANGE_ME_WITH_A_RANDOM_32_BYTE_SECRET

# ========================
# AI Summaries (Local)
# ========================
# Docker default uses the compose service name.
OLLAMA_URL=http://ollama:11434
# Tiny model recommended for fast task summaries.
OLLAMA_MODEL=qwen2.5:0.5b
# Timeout for model requests in milliseconds.
OLLAMA_TIMEOUT_MS=15000

# ========================
# Authentication
# ========================
# please generate your own secure 32-byte secret using openssl rand -base64 32
AUTH_SECRET=CHANGE_ME_WITH_A_RANDOM_32_BYTE_SECRET
# PBKDF2 iterations used for credential hashing.
AUTH_PBKDF2_ITERATIONS=310000


# Database (Docker-ready)
# Keep as is unless docker-compose.yml is changed
DATABASE_URL=postgresql://myuser:mypass@database:5432/mydb

# ========================
# Auth Hardening (Rate Limits / Lockout)
# ========================
# CSRF endpoint limiter (GET /api/auth/csrf)
AUTH_LIMIT_CSRF_WINDOW_SEC=60
AUTH_LIMIT_CSRF_MAX=40

# Credentials callback limiter (POST /api/auth/callback/credentials)
AUTH_LIMIT_CREDENTIALS_WINDOW_SEC=300
AUTH_LIMIT_CREDENTIALS_MAX=12

# Registration limiter (POST /api/auth/register)
AUTH_LIMIT_REGISTER_WINDOW_SEC=3600
AUTH_LIMIT_REGISTER_MAX=6

# Exponential lockout settings for repeated credential failures
AUTH_LOCKOUT_FAIL_THRESHOLD=5
AUTH_LOCKOUT_BASE_SEC=30
AUTH_LOCKOUT_MAX_SEC=1800
AUTH_LOCKOUT_RESET_SEC=86400


# ========================
# OAuth Providers (Optional)
# ========================
AUTH_GOOGLE_ID=
AUTH_GOOGLE_SECRET=
AUTH_DISCORD_ID=
AUTH_DISCORD_SECRET=

# ========================
# AWS (Optional - Notes & Encrypted File Storage)
# ========================
AWS_BUCKET_NAME=
AWS_ACCESSKEYID=
AWS_SECRETACCESSKEY=
AWS_REGION=
